<!DOCTYPE html>
<!--
  ============================================================================
  INDEX.HTML - The Main HTML Page
  ============================================================================
  
  WHAT IS THIS FILE?
  ------------------
  This is the "shell" that holds our React application.
  
  Think of it like a picture frame:
    - The frame (this HTML) stays the same
    - The picture (React components) changes dynamically
  
  
  WHAT DOES IT CONTAIN?
  ----------------------
  - Basic HTML structure (<html>, <head>, <body>)
  - Link to our CSS file (styles)
  - A <div id="root"> where React renders
  - A <script> tag that loads our React app
  
  
  WHY IS IT SO SIMPLE?
  --------------------
  Modern web apps are "Single Page Applications" (SPAs).
  The HTML is minimal - React generates most of the DOM.
  
  
  HOW IT WORKS:
  -------------
  1. Electron loads this HTML file
  2. Browser parses HTML and loads app.css
  3. Browser executes <script src="app.js">
  4. React mounts to <div id="root">
  5. React renders all our components (buttons, forms, etc.)
-->

<html lang="en">
<head>
  <!-- ========== META TAGS ========== -->
  
  <!-- Character encoding (handles emojis, international characters) -->
  <meta charset="UTF-8">
  
  <!-- Viewport for responsive design (not critical for desktop, but good practice) -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- 
    Content Security Policy (CSP) - Security Settings
    
    WHAT IS THIS?
    Tells the browser what resources are allowed to load.
    
    SETTINGS EXPLAINED:
    - default-src 'self': Only load resources from same origin
    - script-src 'self' 'unsafe-inline': Allow inline scripts (needed for React)
    - style-src 'self' 'unsafe-inline': Allow inline styles
    
    WHY?
    Prevents malicious code injection attacks.
    
    NOTE: 'unsafe-inline' is needed for React to work.
    In production, you'd use nonces for better security.
  -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';">
  
  <!-- Page title (shows in window title bar) -->
  <title>Jira Automation Assistant</title>
  
  <!-- Link to our CSS file -->
  <link rel="stylesheet" href="styles/app.css">
</head>

<body>
  <!-- ========== ROOT DIV ========== -->
  
  <!--
    This is where React "mounts" - all our UI goes here.
    
    HOW IT WORKS:
    1. React finds this div by ID: document.getElementById('root')
    2. React replaces its contents with our components
    3. When data changes, React updates this div
    
    INITIAL STATE: Empty
    AFTER REACT LOADS: Full of buttons, forms, progress bars, etc.
  -->
  <div id="root">
    <!-- 
      Loading message (optional)
      Shows briefly while React is loading.
      React will replace this with the actual app.
    -->
    <div style="
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      font-family: Arial, sans-serif;
      color: #666;
    ">
      <div>
        <h2>Loading Jira Automation Assistant...</h2>
        <p>Please wait</p>
      </div>
    </div>
  </div>
  
  <!-- ========== REACT APP SCRIPT ========== -->
  
  <!--
    This loads our compiled React application.
    
    WHERE IS app.js?
    In development: Webpack dev server provides it
    In production: It's in the build output (dist/renderer/app.js)
    
    WHAT'S IN app.js?
    - React library
    - Our App component
    - All child components
    - All our TypeScript code (compiled to JavaScript)
    
    NOTE: You'll need to set up React build process for this to exist.
    See package.json for build scripts.
  -->
  <script>
    /*
     * SIMPLE REACT BOOTSTRAP
     * 
     * Since we're building a simple app, we'll use a basic approach:
     * Load React from CDN and mount a simple component.
     * 
     * For a production app, you'd use a proper build system (Webpack, Vite, etc.)
     */
    
    // Check if window.electron is available
    if (!window.electron) {
      // Preload script didn't load - show error
      document.getElementById('root').innerHTML = `
        <div style="
          padding: 20px;
          color: red;
          font-family: Arial, sans-serif;
        ">
          <h2>‚ö†Ô∏è Error: Electron API not available</h2>
          <p>The preload script failed to load.</p>
          <p><b>To fix:</b></p>
          <ol>
            <li>Run: npm run build</li>
            <li>Check that preload.js exists in dist/main/</li>
            <li>Restart the app</li>
          </ol>
        </div>
      `;
    } else {
      // Electron API available - show success message
      console.log('‚úì Electron API loaded successfully');
      
      // For now, show a simple UI
      // Later, this will be replaced with React components
      document.getElementById('root').innerHTML = `
        <div style="
          padding: 20px;
          font-family: Arial, sans-serif;
        ">
          <h1>üöÄ Jira Automation Assistant</h1>
          <p>UI Framework: Ready for React Integration</p>
          <p>Electron API: <span style="color: green; font-weight: bold;">‚úì Connected</span></p>
          
          <hr>
          
          <div style="margin-top: 20px;">
            <h3>Next Steps:</h3>
            <ol>
              <li>‚úì Project structure created</li>
              <li>‚úì TypeScript configured</li>
              <li>‚úì Electron main process ready</li>
              <li>‚úì Preload script working</li>
              <li>‚è≥ React components (in progress)</li>
              <li>‚è≥ Automation scripts (in progress)</li>
            </ol>
          </div>
          
          <hr>
          
          <div style="margin-top: 20px;">
            <h3>Quick Test:</h3>
            <button 
              onclick="testIPC()" 
              style="
                padding: 10px 20px;
                font-size: 16px;
                background: #0052CC;
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
              "
            >
              Test IPC Communication
            </button>
            <div id="test-result" style="margin-top: 10px; color: #666;"></div>
          </div>
        </div>
      `;
      
      // Test function for IPC
      window.testIPC = function() {
        const resultDiv = document.getElementById('test-result');
        resultDiv.textContent = 'Sending test message to main process...';
        
        try {
          // Try to load config
          window.electron.send('config:load');
          
          // Listen for response
          window.electron.once('config:loaded', (config) => {
            console.log('Received config:', config);
            resultDiv.innerHTML = `
              <b style="color: green;">‚úì IPC working!</b><br>
              Config loaded: ${JSON.stringify(config, null, 2).substring(0, 100)}...
            `;
          });
          
          // Timeout if no response
          setTimeout(() => {
            if (resultDiv.textContent.includes('Sending test')) {
              resultDiv.innerHTML = '<b style="color: orange;">‚è±Ô∏è Waiting for response...</b>';
            }
          }, 2000);
          
        } catch (error) {
          resultDiv.innerHTML = `<b style="color: red;">‚ùå Error: ${error}</b>`;
        }
      };
    }
  </script>
</body>
</html>

<!--
  ============================================================================
  DEVELOPER NOTES
  ============================================================================
  
  HOW TO ADD REACT:
  
  Option 1: CDN (Quick & Easy)
  
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="app.js"></script>
  
  
  Option 2: Bundler (Production-Ready)
  
  1. Install: npm install react react-dom
  2. Set up Webpack or Vite
  3. Create src/renderer/App.tsx
  4. Build: npm run build
  5. Output: dist/renderer/app.js
  
  
  COMMON ISSUES:
  
  1. "window.electron is undefined"
     - Preload script not loaded
     - Fix: Check main.ts has preload path set correctly
  
  2. "Cannot find module 'react'"
     - React not installed
     - Fix: npm install react react-dom
  
  3. "Blank page"
     - Check console for errors (F12)
     - Check that app.js is being loaded
     - Check that React is mounting to #root
  
  
  NEXT STEPS:
  
  Once you see this page working:
  1. Set up React build process
  2. Create App.tsx component
  3. Create child components (ControlPanel, ProgressMonitor, etc.)
  4. Import and use IPC_CHANNELS for communication
  5. Style with CSS
-->
